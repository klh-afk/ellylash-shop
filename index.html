<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ELLYLASH ‚Äì Booking</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    body {
      background: #faf6f3;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-start">

  <!-- HERO -->
  <section class="text-center mt-12">
    <h1 class="text-4xl font-light tracking-wide">ELLYLASH</h1>
    <p class="text-gray-500 mt-2">Premium Eyelash Extensions</p>
    <a href="#booking" class="inline-block mt-6 px-8 py-3 bg-[#e7dcd5] rounded-full text-sm">
      BOOK NOW
    </a>
  </section>

  <!-- BOOKING -->
  <section id="booking" class="mt-10 bg-white rounded-2xl p-6 w-[90%] max-w-md shadow">
    <h2 class="text-center text-lg mb-4">Book Your Appointment</h2>

    <form id="booking-form" class="space-y-3">
      <input id="name" required placeholder="‡∏ä‡∏∑‡πà‡∏≠"
        class="w-full border rounded-lg px-3 py-2" />

      <input id="phone" required placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£"
        class="w-full border rounded-lg px-3 py-2" />

      <input id="date" type="date" required
        class="w-full border rounded-lg px-3 py-2" />

      <select id="time" required
        class="w-full border rounded-lg px-3 py-2">
        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</option>
        <option>10:00</option>
        <option>11:00</option>
        <option>12:00</option>
        <option>13:00</option>
        <option>14:00</option>
        <option>15:00</option>
        <option>16:00</option>
        <option>17:00</option>
      </select>

      <button
        type="submit"
        class="w-full py-3 rounded-lg bg-[#e7dcd5] mt-4">
        CONFIRM BOOKING
      </button>
    </form>
  </section>

  <!-- CONTACT -->
  <section class="mt-10 text-center text-sm text-gray-600 space-y-2">
    <div>LINE</div>
    <div>Instagram</div>
    <div>061-346-1653</div>
  </section>

  <!-- SCRIPT -->
  <script>
    const supabaseUrl = "https://smrlqglbawthenzbn.supabase.co";
    const supabaseKey = "sb_publishable_lETjZpKlrwpXFwFb9mH4g_vPCJK6Kv";
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    const form = document.getElementById("booking-form");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value;
      const phone = document.getElementById("phone").value;
      const date = document.getElementById("date").value;
      const time = document.getElementById("time").value;

      const { error } = await supabase.from("bookings").insert([
        {
          customer_name: name,
          phone: phone,
          booking_date: date,
          start_time: time
        }
      ]);

      if (error) {
        alert("‚ùå ‡∏à‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
        console.log(error);
        return;
      }

      const message = `
‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏ï‡πà‡∏≠‡∏Ç‡∏ô‡∏ï‡∏≤ üíñ
‡∏ä‡∏∑‡πà‡∏≠: ${name}
‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${phone}
‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${date}
‡πÄ‡∏ß‡∏•‡∏≤: ${time}
      `;

      const lineUrl =
        "https://lin.ee/sCZUvJG?text=" +
        encodeURIComponent(message);

      alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏õ LINE ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏¥‡∏ß");
      window.open(lineUrl, "_blank");

      form.reset();
    });
  </script>
</body>
</html>
